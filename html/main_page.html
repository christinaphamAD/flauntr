<!DOCTYPE html>


<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../css/main_page.css" />
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
		
 		<!--Custom Script-->
        <script src="../rohan/main4.js"></script>
        <style type="text/css">
		
		</style>
		
	</head>
	<body>
		<div id="headbanner">
			<div id= "logo">flaunt<span id="r">r</span></div>
			<div id="auth"><a id="getsets"><div id="authbutton">Sign in via Yahoo</div></a></div>
		</div>
		<div id="content-left">
			<div id="content-gallery">
				<div class="scroll-pane">
	    			<div class="scroll-content">
	        			<div class="scroll-content-item">
							CLICK ON SETS TO RETRIEVE IMAGES
						</div>
	            	</div>
	        		<div class="scroll-bar-wrap">
	       				<div class="scroll-bar">
	            		</div>
	            	</div>
				</div>
			</div>
			<div id="albumscrollerwrapper">
				<div id="albumtab">Albums</div>
				<div id="albumscroller">
					<div id="sets">
						<ul>
							<li></li>
						</ul>
					</div>
				</div>
			</div>
		</div>		
		<div id="content-right">
    	<!-- This text might look like just a nicety, but it's required by the spec. Help users to expect promises of privacy on the Web. 
    	<p>The Map</p>
    	<input type="button" id="locate" value="Locate Me"/>
    	<div id="map_canvas"></div>-->
        	<h2 class = "tagheads">Tags</h2>
        	<div id="content-tags">
			<input type="text" name="tag" id="tag"/>
			<input type="button" id="gettags" value="Suggest Tags"/> <br>
			<div id="tag-finder">
				<ul>
				</ul>
			</div>
		</div>
		</div>
		
	</body>
	<script>
    $(function() {
        function log( message ) {
            $( "<div>" ).text( message ).prependTo( "#log" );
            $( "#log" ).scrollTop( 0 );
        }
        
$('#tag-finder ul').empty();
        $( "#tag" ).autocomplete({
        
            source: function( request, response ) {
                var tagtext = $('#tag').val();
                var url = tagtext;

        $.ajax({
         url: "http://api.flickr.com/services/rest/?method=flickr.tags.getRelated&api_key=69ec61b6e4a407a91eb6946b224cb0e1&tag="+tagtext+"&format=json&nojsoncallback=1",
        dataType: "json", 
        success: function( data ) {
          //  console.log(data);
          //  console.log(url);


          var count = 0;
          var arr = data.tags.tag; 
          var arr1 = arr.slice(0,10);
          response( $.map(arr1, function(item) {
                count++;
                if(count>1)
                {

                return {
                        
                        label: item._content,
                        value: item._content
                        //label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                        //value: item.name

                        }
                 } else
                  {return {
                   label: tagtext ,
                   value: tagtext
                  }

                  }       
                    }));
                   }
                });
            },
            minLength: 2,
            select: function( event, ui ) {
				// This will create the divs that are "tag-zones"
				var data_id = ui.item.value;
				$('<div class="tag-zone" id="' + data_id + '"><h3 class="tagzonename">#' + data_id + '</h3></div>') 
					.appendTo('#content-right')
					.droppable({
						// This will check to see if there are duplicates
						accept: function($item) {
    					return ($item.parent().hasClass("gallery") && $(this).find('li[data-id="'+$item.data("id")+'"]').length <= 0);
       					},
						// This actually handles the ability for our tag-zone to accept photos
        				drop: function( event, ui ) {
        					addToZone( ui.draggable, $(this) )
						}
					})
                /*log( ui.item ?
                    "Selected: " + ui.item.label :
                    "Nothing selected, input was " + this.value);*/
       //     alert("selected !");
            },
            open: function() {
                $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
         //   alert("open");
            },
            close: function() {
                $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
            }
        });
    });


    </script>
</html>
